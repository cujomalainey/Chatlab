package ca.Skrundz.Communications;

import java.nio.channels.Selector;
import java.nio.channels.SocketChannel;
import java.util.concurrent.ConcurrentHashMap;


public class SocketManager extends Thread {
	
	private static ConcurrentHashMap<String, SocketManager> sockets = new ConcurrentHashMap<String, SocketManager>();
	
	//====================================================================
	// MATLAB Event callback
	//====================================================================
	private java.util.Vector<SocketListener> eventListeners	= new java.util.Vector<SocketListener>(4,1);
	
	public synchronized void addListener(SocketListener lis) {
		eventListeners.addElement(lis);
	}
	
	public synchronized void removeListener(SocketListener lis) {
		eventListeners.removeElement(lis);
	}
	
	public interface SocketListener extends java.util.EventListener {
		void receiveMessage(String messageStructure);
		void acceptConnection(SocketChannel channel);
	}
	// End ================================================================
	
	public static class UniqueInt {
		private static int id	= 0;
		public static int get() {
			id = (id == Integer.MAX_VALUE) ? 1 : id+1;
			return id;
		}
	}
	
	private Selector selector = null;
	
	public static SocketManager init() {
		SocketManager manager = new SocketManager();
		manager.start();
		managers.put(String.valueOf(UniqueInt.get()), sMan);
	}
	
	public void run() {
		
	}
	
}